<!-- The game view -->
<section class="container" ng-controller="GameController">
  <div class="page-header">
    <h1>Game Example</h1>
  </div>
  <div class="col-xs-12 col-md-2">
    <h3>Connected Users</h3>
    <ul class="list-unstyled">

      <li class="row" ng-repeat="user in Game.userList">
        <div class="col-md-3">
          <img ng-src="{{Game.getUserProfileImage(user)}}" alt="{{user}}" class="game-profile-image"/>
        </div>
        <div class="col-md-6">
          <div ng-if="Game.isDrawer(user)"><strong ng-bind="user"></strong></div>
          <div ng-if="!Game.isDrawer(user)"><span ng-bind="user"></span></div>
        </div>
      </li>

    </ul>
    <button ng-disabled="!Game.isDrawer(username)" ng-click="finishDrawing()">Finish Drawing</button>
    <button ng-disabled="!Game.isDrawer(username)" ng-click="clearDrawing()">Clear</button>
  </div>

  <!-- Chat stuff -->
  <div class="chat-container col-xs-12 col-md-3">
    <div class="game-message-box" scroll-glue>
      <ul class="list-unstyled">
        <!-- List all messages -->
        <li class="col-xs-12 col-md-12 game-message" ng-class="message.type" ng-repeat="message in messages">
          <!-- TODO: Decide whether we want a timestamp -->
          <!--<small class="pull-right text-muted" am-time-ago="message.created"></small>-->
          <div class="pull-left game-message-details" ng-class="message.type">
            <div class="wordwrap">
              <span ng-bind="message.username" class="username" ng-class="message.type"></span>
              <span class="message-text" ng-bind="message.text" ng-class="message.type"></span>
            </div>
          </div>
        </li>
      </ul>
    </div>

    <!-- The message form -->
    <div class="message-form col-xs-12 col-md-12">
      <form class="col-xs-12 col-md-12" ng-submit="sendMessage()">
        <fieldset class="row">
          <div class="input-group col-xs-12 col-md-12">
            <input ng-disabled="Game.isDrawer(username)" type="text" id="messageText" name="messageText" class="form-control" ng-model="messageText" ng-trim="false" maxlength="{{ChatSettings.MAX_MSG_LEN}}" placeholder="Enter new message">
          </div>
        </fieldset>
      </form>
    </div>
  </div>

  <!-- The canvas -->
  <div class="col-xs-12 col-md-5" >
    <h3 class="text-center" ng-if="Game.isDrawer(username)">Draw "<span ng-bind="topic"></span>"</h3>
    <div class="dt-drawing"></div>
  </div>

  <!-- Drawing settings -->
  <div class="col-xs-12 col-md-2">
    <h3 class="text-center">Drawing settings</h3>
    <input colorpicker="hex" type="text" name="penColour" ng-model="penColour" ng-change="mouseMode = 'pen'" colorpicker-is-open="true" size="5" maxlength="7"/>
    <div class="row">
      <div class="col-md-3">
        <button ng-disabled="mouseMode === 'pen'" ng-click="mouseMode = 'pen'"><i class="fa fa-pencil"></i></button>
      </div>
      <div class="col-md-9">
        <input type="range" ng-model="penWidth" ng-change="mouseMode = 'pen'" min="{{CanvasSettings.MIN_PEN_WIDTH}}" max="{{CanvasSettings.MAX_PEN_WIDTH}}">
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <button ng-disabled="mouseMode === 'eraser'" ng-click="mouseMode = 'eraser'"><i class="fa fa-eraser"></i></button>
      </div>
      <div class="col-md-9">
        <input type="range" ng-model="eraserWidth" ng-change="mouseMode = 'eraser'" min="{{CanvasSettings.MIN_ERASER_WIDTH}}" max="{{CanvasSettings.MAX_ERASER_WIDTH}}">
      </div>
    </div>
  </div>

</section>
